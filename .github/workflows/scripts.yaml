# Test the scripts.

on:
  pull_request:
    branches:
    - main

jobs:
  
  run-with-summary:
    runs-on: ubuntu-latest
    env:
      FILE: report-${{ github.run_id }}.md

    steps:
    - uses: actions/checkout@v4
    - name: run-with-summary
      continue-on-error: true
      env:
        SUCCESS: "Pinging Google Passed"
        FAILURE: "Ping Failed"
        SUMMARY: yes
      run: |
        ./src/run-with-summary ping w3.org -c5

    - name: Print Summary
      run: |
        cat $FILE >> $GITHUB_STEP_SUMMARY

    - name: Exit
      if: failure()
      run: exit 1